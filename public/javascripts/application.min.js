jQuery.ajaxSetup({beforeSend:function(a){a.setRequestHeader("Accept","text/javascript")}});jQuery.fn.delay=function(a,b){return this.queue(b||"fx",function(){var c=this;setTimeout(function(){$.dequeue(c)},a)})};jQuery.fn.submitWithAjax=function(){this.submit(function(){$("#spinner").show();$.post(this.action,$(this).serialize(),function(){$("#spinner").hide()},"script");return false});return this}; jQuery.fn.ajaxGet=function(){this.click(function(a){a.preventDefault();$.get(this.href,null,null,"script");return false});return this}; $(document).ready(function(){$("#params_pmid").bind("keyup",function(){var a=$(this).val(),b=/^\d{5,8}$/;if(b.test(a)){$("#params_pmid_button").show();$("#params_pmid_message").hide()}else{$("#params_pmid_button").hide();$("#params_pmid_message").show().html("Pubmed ID should be between 5 and 8 digits long without any letters")}});$("#flash").delay(5E3).slideUp("slow");$(".item .head").click(function(){$(this).next().toggle("slide",{direction:"up"},500);return false}).next().hide();$("#paper_journal_attributes_long_title").autocomplete("/journal_list"); $("#cme_cme_category_attributes_category").autocomplete("/cme_categories_list");$("#pmid_submit_form").submitWithAjax();$("form#search_form").submit(function(a){a.preventDefault();$.get(this.action,$(this).serialize(),null,"script");return false});$("a.delete").click(function(a){a.preventDefault();a=$(this).closest("div.original");var b=a.next("div.confirm"),c=a.closest("div.item");a.hide();b.show("clip",400);c.addClass("highlight")});$("a.delete-cancel").click(function(a){a.preventDefault();a=$(this).closest("div.confirm"); var b=a.prev("div.original"),c=b.closest("div.item");a.hide();b.show("clip",400);c.removeClass("highlight")});$("a.delete-confirm").click(function(a){a.preventDefault();a=$(this).closest("form");var b=$(this).closest("div.item");$.ajax({type:"DELETE",url:a[0].action,success:function(){b.slideUp(600,function(){$(this).remove()})}});return false});$("table#faculty").inPlaceEdit();$(".date_select").datepicker();$("form").not(".skip_validation").validate({ignore:".ignore",errorClass:"invalid",errorElement:"em"}); $("#new_paper").validate({ignore:".ignore",errorClass:"invalid",errorElement:"em"});$("input[name='cancel']").bind("click",function(){$(":input").addClass("ignore");$(this).parent("form").submit()})});